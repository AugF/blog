---
title: nju-course distributed system
copyright: true
top: 0
reward: false
mathjax: true
date: 2019-09-19 12:04:16
tags:
- nju
- course
- distributedSystem
categories:
- [course, nju, distributedSystem]
---
## 分布式系统模型

1. 什么是分布式系统？
- 分布式系统是若干个独立的计算机的集合，这些计算机对于用户来说就像是单个相关的系统

2. 为什么要分布式？
- 让用户连接到资源;
- 保证资源在网络上分布的透明性;
- 分布式系统是开放的
- 分布式系统是可扩展的

3. 分布式系统透明性和开放性的含义

透明性可以运用到分布式系统中的各个方面
- 访问，隐藏数据表示形式的不同以及资源访问方式的不同
- 位置，隐藏资源所在位置
- 迁移，隐藏资源是否移动到另一个位置
- 重定位，隐藏资源是否在使用过程中移动到另一个位置
- 复制，隐藏是否对资源进行复制
- 并发，隐藏资源是否由若干个相互竞争的用户共享
- 故障，隐藏资源的故障和恢复
- 持久性，隐藏资源在内存中还是在硬盘中

（未答透明性的级别）

开发性的含义

一个开发是系统应该是一个这样的系统，它根据一系列准则来提供服务，这些准则描述了所提供服务的语法和语义
- 能够与其他开放系统的富户及你想嗯交互，与潜在的环境无关
  - 系统应该遵守明确的接口定义
  - 系统应该支持应用的可移植性
  - 系统应该能够易于交互
- 它必须是灵活的，要能够方便地把有不同的开发人员开发的不同组件组合成整个系统。

4. 分布式系统、网络操作系统和基于中间件的系统

- 分布式操作系统，紧耦合的操作系统，用于多处理器系统和同构式多计算机系统，主要目标是隐藏及管理硬件资源
- 网络操作系统，松耦合的操作系统，用于异构式多计算机系统（LAN和WAN），主要目标是向远程客户提供本地服务
- 中间件，位于网络操作系统通用服务上的附加层，主要目标是提供分布式透明性
  
5. 分布式系统的类型
- Distributed computing systems（云计算LAN，网格计算）
- Distributed information systems（TP monitor）
- Distributed pervasive systems (分布式普适系统,移动计算系统等等)

6. 机制和策略的理解
- 需要对不同策略的支持
  - 对客户端cache数据一直性要求有多高
  - 可以允许下载代码执行哪些操作
  - 面对不同带宽，如何调整QoS的要求
  - 通信过程需要什么程度的加密
- 理想上，分布式系统仅仅提供机制
  - 允许动态设置缓存测绿
  - 支持不同程度的移动代码信任
  - 每个数据流提供可调的QoS参数
  - 提供不同的加密算法
- 机制与策略分离原则
  - 机制由系统实现，策略由用户完成
  - 机制放在底层，策略放在高层
  - 机制集中在少数模块，策略散布在多处

## 分布式系统架构

1. 分布式系统架构风格
   
- 组织为逻辑上不同的部分，每个部分分布在不同的机器上
   - 层次结构
   - 面向对象式的结构
 - 在空间上或者时间上对进程进行的分离
   - 事件总线，发布订阅模式
   - 共享数据空间

2. 分布式系统组织形式
- 中心式
  - C/S模式
- 非中心式
  - 结构化P2P
  - 非结构化P2P
- 混合式(BitTorrent）

3. 客户-服务器模式和对等模式

4. 分布式系统组织为中间件


## 进程和线程

1. 进程 vs 线程
程序是静态的代码和数据
进程是动态的代码和数据的实例

进程时具有独立功能的程序关于某个数据集合的一次进行活动，是资源分配和调度的基本单位
线程是进程的实体，是CPU调度的基本单位

2. 代码迁移
- 强迁移 vs 弱迁移
定义： 将整个进程从一台机器搬到另一台机器上
强迁移：迁移后的程序可以从当前开始执行
弱迁移：迁移后的程序必须从初始状态开始执行

3. 代码迁移vs虚拟机迁移
- 优势： 代码迁移最多包含代码，数据，执行状态的迁移，总传输量远小于一个虚拟机，所以轻量，网络负载小，无需引入其他中间语言
- 不足：在异构系统中可能不适合执行迁移的代码，进程/线程/处理器上下文可能高度依赖于本地硬件，OS和运行时系统

## 通信

1. 通信的类型
- 远程调用RPC
- 基于消息的通信
2. 远程调用RPC
注意：对于基本的RPC调用，client要有进入localOS中。
- RPC工作过程：
    - 客户过程以正常方式调用客户存根
    - 客户存根生成一个消息，然后调用本地操作系统
    - 客户端操作系统发送消息给远程操作系统
    - 服务器存根将参数提取出来，然后调用服务器
    - 服务器执行要求的操作，操作完成后将结果返回给服务器存根
    - 服务器存根把结果打包为一个消息，然后调用本地操作系统
    - 服务器操作系统将含有结果的消息发送给客户端操作系统
    - 客户端操作系统将消息交给客户存根
    - 客户存根将结果从消息中提取出来，返回给调用它的客户过程
- 故障处理
    - 客户无法定位到服务器
      - 解决：使用特定的返回值/异常处理
    - 客户发给服务器的请求消息丢失
      - 解决：设置一个timer, 超时重发
    - 服务器发给客户的应答消息丢失
      - 解决：设置一个 timer,对于不幂等的请求，为客户请求分配序号，服务器区别不同的请求
    - 服务器在收到消息后崩溃
    1 接受后，执行前崩溃
    2 执行后，发送前崩溃
      - 解决：等待服务器启动,然后重发请求/立即放弃并报告失败/不做任何保证
    - 客户机在发送消息后崩溃
      - 解决：根绝 extermination: 在日志文件中纪录 RPC 请求，重启后清除孤儿再生 reincarnation: 将时间划分成不同时期，重启后广播新的时期开始。一旦收到广播消息， kill所有 remote computations.温和再生 gentle reincarnation: 将时间划分成不同时期，重启后广播新的时期开始。收到广播消息时，定位 remote computations 的 owner，kill 没有 owner 的。过期 expiration: 赋予每个 RPC 一个一个执行时间 T，未完成任务需显式申请附加配额。
- 动态绑定
  - client寻找server过程使用，client提供paras(versionm), handler处理
  - 为什么？
    - （1）灵活性
    - （2）可以支持多个服务器提供相同接口
    - （3）binder（具有粘结剂的意思）可以确认客户端和服务器使用相同的接口版本
  - 缺点
      - （1）输出、引入接口需要额外管理，花费时间
      - （2）在大型分布式系统中，binder的存在可能会是通信瓶颈
3. 基于消息的通信
- 暂时（一旦发出接收后便不再存在无论是否被接收） vs 永久（信息在中间件永久存在，如邮件系统）
- 异步（local buffer暂时保留，qq离线消息） vs 同步（对话， blocked）

4. 流数据
- 视频、音频，雷达;对时间敏感
- 流数据+QoS（服务质量，评价指标）
  - 需要传输的数据的位数
  - 通信之间的延迟
  - end-to-end的延迟
  - 最大延迟时间
- 可能考点：组播通信两种方式
  - Application-level：
    - chord-based tree building
    - 覆盖网
    - epidemic algortihms
  - Gossip-based data dissemination

## 同步与资源管理

1. 同步问题
- 系统需要决定谁先谁后
2. 时钟同步机制
- 系统标准时间UTC
- 网络同步（T1-T0-I）/2
- The Berkeley Algorithm:公认时间，平均时间
- Averaging Algorithm:去掉最高和最低
1. 逻辑时钟
- Lamport算法
- 向量时撮
2. 分布式系统中的互斥访问
- 集中式算法
- 分布式算法
- 
3. 分布式系统中的选举机制


## 复制与一致性

1. 复制的优势与不足
2. 数据一致性模型
3. 数据一致性协议实例
   1. 基于法定数量的协议


## 容错

1. 可信系统
2. 提高系统可信性的途径
3. K容错系统
4. 拜占庭问题
5. 系统回复
   1. 回退恢复
   2. 前向恢复
6. 检查点

## 大数据处理系统

Big data analytics: making sense of complex data

Input: unstructured, multimodal, Hig-dimensional, interconneccted, growing fast in volume

Goal: discover interpretable patterns; understand causal relationships; make informed predictions and decisions

Challenge：
- the growth of data volume
- the complexity of analytics
- limitied cluster resources

Solution overview
- Normalize quality metrics
- Pedict quality improvent
- Quality-driven scheduling

## 物联网

1. 物联网的概念
物联网是一个基于互联网、传统电信网等信息载体，让所有能够被独立寻址的普通物理对象实现互联互通的网络

2. 物联网分类
普通对象设备化
自治终端互联化
普适服务智能化

3. 物联网四层模型
- 综合应用层：从以数据服务为主要特征的文件传输到以用户为中心的应用
- 管理服务层：将大规模数据组织起来，为上层应用提供支撑
- 网络构建层：吧下层设备接入互联网，供上层服务使用，包括3G、4G、Wifi、蓝牙、NFC等通信技术
- 感知识别层：联系物理世界和信息世界，包括RIFD、无限传感器、移动终端等感知设备。射频识别技术

基于目标定位的微动作感知识别机制

## 云计算 
1. 简要说明虚拟化技术所解决的问题，并说明虚拟化技术与云计算的关系
- 虚拟化技术所解决的问题：虚拟化是由位于下层的软件模块，将其封装或抽象，提供一个物理或软件的接口，使得上层的软件可以直接运行在这个虚拟的环境和运行在原来的环境一样
- 虚拟化技术与云计算的关系：
  - 虚拟化具有以下优点，有利于云计算
    - 封装与隔离的特点，保证每个用户有安全可信的工作环境
    - 多实例的特点，保证较高的资源利用率，为服务器合并提供基础
    - 硬件无关性的特点，整合异构硬件资源，可实现虚拟机迁移，使资源调度、负载平衡容易实现
  - 特权功能的特点，用于云计算的入侵检测和病毒检测
  - 动态调整资源特点，便于云计算的细粒度的可扩展性

2. Openstack为代表的基本功能是什么
IaaS，基础设施即服务组件，让任何人都可以自行建立和提供云端运算服务。此外，openstack也用作建立防火墙内的“私有云”，提供机构或企业内各部门共享资源。以openstack为代表的IaaS的功能：为IT行业创造虚拟的计算和数据中心，使得其能够把计算单元、存储器、I/O设备、带宽等计算机基础设施，集中起来成为一个虚拟的资源池来为整个网络提供服务。

3. 应用场景一适合，应用场景二不适合。OpenStack是基于虚拟化的IaaS云平台，提供的是有性能损耗的虚拟化资源，适用于资源类型较为单一、资源需求实时变化的系统，不适用于高性能计算。
