---
title: nju-course-cplus-lecture7
copyright: true
top: 0
reward: false
mathjax: true
date: 2019-09-19 09:59:18
tags:
- nju
- course
- cplus
categories:
- [course, nju, cplus]
---
# 重点

## 转移构造函数&转移赋值操作符重载函数

拷贝构造问题
当用一个临时或即将消亡的对象去初始化另一个同类的对象时，目前的拷贝构造函数实现效率不高

主要对应的是一种情况：即当类作为返回值时，调用拷贝构造函数后会立即消亡。

在C++中就提出了一种转移构造函数的概念。

转移构造函数即进行资源转移
A(A&& x) {
    p=x.p;
    x.p=NULL;
}

赋值操作符重载， 转移赋值操作符重载


## 函数式&逻辑式程序设计

从本质上说，用计算机来解决实际问题就是通过对反映问题本质的数据进行处理来实现的:
程序=算法+数据结构

如何看待和组织算法和数据结构却存在着不同的做法，从而形成不同的程序设计范式：
- 程序设计范式是设计、组织和编写程序的一种方式，它往往要基于一组理论、原则和概念
- 不同的范式将采用不同的程序结构和程序元素来描述程序。
- 范式具有针对性，不同的范式往往适合于解决不同类型的问题。

1. 过程式程序设计
- 一种以功能为中心、基于功能分解和复合的程序设计范式。
- 程序由一些子程序构成，每个子程序对应一个子功能。子程序描述了一系列操作，它是操作的封装体，实现了过程抽象。
- 程序的执行过程体现为一系列的子程序调用
- 在过程式程序中，数据处于附属地位，它独立于子程序，在子程序调用时通过参数或全局变量传给子程序使用。

2. 面向对象程序设计
- 一种以数据为中心，基于数据抽象的程序设计范式。
- 程序由一些对象构成，对象是由一些数据及可施加于这些数据上的操作所组成的封装体。
- 对象的特征由相应的类来描述，一个类描述的对象特征可以从其它的类获得。
- 程序的执行过程体现为各个对象之间相互发送和处理消息
- 在面向对象程序中，数据表现为对象的属性，对数据的操作是通过向包含数据的对象发送消息（调用对象提供的操作）来实现。

3. 函数式程序设计
- 程序由一组数学函数构成，计算过程体现为一系列的函数应用（把函数作用于数据）
- 基于的理论是递归函数理论和lambda演算

4. 逻辑式程序设计
- 程序由一组事实和一组推理规则构成，在事实基础上运用推理规则来实施计算。
- 基于的理论是谓词演算。

## 命令式&声明式程序设计

1. 命令式程序设计
- 强调对“如何做”的描述，要对操作步骤和状态变化给出明确的描述。例如，过程式和面向对象程序设计
- 与冯洛伊曼结构一致，是使用较广泛的程序设计范式，适合于解决大部分的实际应用问题。

2. 声明式程序设计
- 强调对“做什么”的描述，而如何做则由实现系统自动完成。例如，函数式和逻辑式程序设计
- 有良好的数学理论支持，并且，设计出的程序具有潜在的并行性。适合于需要大量进行复杂的符号处理（非数值计算）的人工智能领域的应用。

函数式程序设计的几个基本特征

- “纯”函数：引用透明（无副作用，以相同的参数调用函数总得到相同的值）
- 没有状态（数据不可变）：计算不改变已有数据，而是产生新的数据。（无赋值操作）
- 函数也是值（first-class citizen) ：函数的参数和返回值都可以是函数。（高阶函数）
- 表达式的惰性（延迟）求值（Lazy evaluation）：需要的时候才计算。
- 潜在的并行性。

函数式程序设计的几个基本技术

- 递归：实现重复操作，不采用迭代方式（循环）。
- 尾递归：递归调用是递归函数的最后一步操作，编译可优化之。 就是返回参数的return f(a,b); 这里f(a,b)不应该含有任何运算
尾递归有以下几个好处：
便于编译程序优化：
    - 重用本次调用的栈空间
    - 自动转成迭代
```
T f(T1 x1, T2 x2, ...)
{  ......
    ... return f(e1,e2,...);
    ......
    ... return f(e3,e4,...);
    ......
}
改成：
T f(T1 x1, T2 x2, ...)
{  while (true)
    { ......
       ... { x1 = e1; x2 = e2; ... continue;} 
       ......
       ... { x1 = e3; x2 = e4; ... continue;}
       ......
    }
}
```
- map/reduce（映射/规约）：对一个集合中的元素做映射和规约操作。
- currying（柯里化）：把接受多个参数的函数变换成接受单一参数（原函数的第一个参数）的函数，该函数返回一个接收剩余参数的函数。（函数约简）


map,  reduce操作

- 惰性和并行求值

对于一个函数式程序：（示意）
a = f1();  //f1是一个纯函数b = f2();  //f2是一个纯函数
......
if (...)    ... a + b ...
由于f1、f2是纯函数，哪个先执行都可以，甚至可以并发执行！
f1、f2也可以到需要它们的时候（a+b）再执行（惰性求值）；如果程序中没用到它们，f1、f2也可以不执行！

逻辑式程序设计简介

程序由一组事实和一组推理规则构成，在事实基础上运用推理规则来实施计算。
基于的理论就是谓词演算

特征
- 数据（事实和规则）就是程序
- 计算（匹配、搜索、回溯）由实现系统自动完成。

语言
Prolog

> 逻辑式程序设计是事实和规则作为数据。 给定目标，系统会自动进行搜索来探讨是否有效
> 函数式程序设计给人的感觉就是运用这些来做。
